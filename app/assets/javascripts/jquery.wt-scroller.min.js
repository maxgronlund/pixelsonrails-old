(function(a){a.fn.wtScroller=function(s){var p="top";var h="bottom";var l="outside";var f="inside";var w=0.85;var d=0.7;var o=1000;var b=600;var n=300;var k=4000;var x="update_buttons";var r="update_thumb";var g="update_index";var e="update_text";var j="start_timer";var v="lightbox_open";var t="lightbox_close";function q(a0,aZ){var az=c(aZ.num_display,3);var M=c(aZ.slide_width,300);var ax=c(aZ.slide_height,200);var Y=u(aZ.slide_margin,1);var aU=u(aZ.margin,10);var S=c(aZ.button_width,35);var aX=c(aZ.ctrl_height,20);var N=aZ.auto_scroll;var y=c(aZ.delay,k);var ak=c(aZ.scroll_speed,o);var aP=aZ.easing;var ar=aZ.auto_scale;var X=aZ.display_buttons;var z=aZ.mouseover_buttons;var aF=aZ.ctrl_type.toLowerCase();var aE=aZ.display_caption;var au=aZ.mouseover_caption;var ay=aZ.caption_position.toLowerCase();var aY=aZ.caption_align.toLowerCase();var aa=aZ.move_one;var G=aZ.cont_nav;var E=aZ.shuffle;var L;var aw;var at;var aN;var F;var aT;var aj;var O;var Q;var aA;var am;var U;var C;var ah;var aC;var ap;var af;var aW;var aS;var aQ;var aV;var aH;this.init=function(){L=a(".wt-scroller",a0);aw=L.find(".slides");at=aw.find(">ul:first");aN=at.find(">li");aj=L.find(".lower-panel");F=L.find(".prev-btn");aT=L.find(".next-btn");aQ=0;aV=0;aW=0;aH=-1;aS=null;U=aN.size();if(U<=az){X=false;aF="none";az=U}if(aF=="index"){aa=false}aM();ad();aD();L.css({width:aw.width()+F.width()+aT.width(),height:aw.height()+aj.outerHeight(),"padding-top":aU});if(E){D()}J();a(document).bind(t,ae).bind(v,ac);L.trigger(t)};var aM=function(){aL();am=new Array(U);aN.each(function(a3){var a2=a(this).find("img:first");var a1=a(this).find(">a:first");if(!a1.attr("href")){a(this).click(Z);a1.css("cursor","default")}else{a1.data("text",a(this).find(">p:first").html())}if(ar){a2[0].complete||a2[0].readyState=="complete"?ab(a2):a2.load(A)}if(aE&&ay==f){W(a(this))}am[a3]=a(this)})};var aL=function(){var a1=aN.find(">p:first");if(aE){var a4=a1.outerWidth()-a1.width();a1.css({width:M-a4,visibility:"visible"}).click(Z);if(ay==l){var a3=a1.map(function(){return a(this).height()}).get();var a2=Math.max.apply(Math,a3);a1.css({top:aY==p?0:ax,height:a2});aV=a1.outerHeight();if(aY==p){aQ=aV}a1.addClass("outside")}else{a1.addClass("inside")}}else{a1.hide()}};var W=function(a1){var a2=a1.find(">p:first");if(a2.length<1||a2.html()==""){a2.remove();return}if(au){a2.css("top",aY==p?-a2.outerHeight():ax);a1.hover(K,aO)}else{a2.css("top",aY==p?0:ax-a2.outerHeight())}};var ad=function(){aN.css({width:M,height:ax+aV,"margin-right":Y}).hover(aR,aB);aw.css({width:(az*aN.width())+((az-1)*Y),height:aN.height()});C=aN.outerWidth(true);var a1;if(aF=="index"){a1=az*Math.ceil(U/az)}else{a1=U}at.width(a1*C);ap=a1-az;ah=0;aC=ap;af=((at.width()-Y)-aw.width())};var aD=function(){aI();aj.css({width:aw.width(),"padding-left":F.width(),"padding-right":aT.width()});switch(aF){case"scrollbar":aJ();var a1=Math.max((aX-Q.height())/2,0);aj.css({"padding-top":a1,"padding-bottom":a1});break;case"index":H();var a1=Math.max((aX-O.height())/2,0);aj.css({"padding-top":a1,"padding-bottom":a1});break;default:aj.remove();L.css("padding-bottom",aU)}};var aI=function(){if(X){if(z){P();aw.append("<div class='m-prev'></div><div class='m-next'></div>");var a2=aw.find(".m-prev").mousedown(Z).click(aq);var a1=aw.find(".m-next").mousedown(Z).click(V);if(!window.Touch){a2.css("left",-a2.width());a1.css("marginLeft",0);aw.hover(function(){a2.stop(true).animate({left:0},n);a1.stop(true).animate({marginLeft:-a1.width()},n)},function(){a2.stop(true).animate({left:-a2.width()},n);a1.stop(true).animate({marginLeft:0},n)})}if(!G){L.bind(x,function(){var a3=Math.abs(aW/C);var a4=a3+az;a2.css(a3>0?{opacity:1,cursor:"pointer"}:{opacity:0,cursor:"default"});a1.css(a4<U?{opacity:1,cursor:"pointer"}:{opacity:0,cursor:"default"})})}}else{F.css({width:S,height:aw.height()}).mousedown(Z).click(aq);aT.css({width:S,height:aw.height()}).mousedown(Z).click(V);if(!G){L.bind(x,I)}}}else{P()}};var P=function(){F.remove();aT.remove();L.css({"padding-left":aU,"padding-right":aU})};var I=function(){var a1=Math.abs(aW/C);var a2=a1+az;F.css(a1>0?{opacity:1,cursor:"pointer"}:{opacity:d,cursor:"default"});aT.css(a2<U?{opacity:1,cursor:"pointer"}:{opacity:d,cursor:"default"})};var aJ=function(){aj.append("<div class='scroll-bar'><div class='thumb'></div></div>");Q=aj.find("div.scroll-bar");aA=aj.find("div.thumb");Q.width(aj.width()).click(ag).mousedown(Z);aA.width(Math.ceil((az/U)*Q.width())).click(Z);var a1=Q.width()-aA.width();var a3=af/a1;try{aA.draggable({containment:"parent"}).bind("drag",function(){at.css({left:Math.round(-aA.position().left*a3)})}).bind("dragstop",function(){ao(aA.position().left/a1)})}catch(a2){}L.bind(r,function(){var a4=Math.round(Math.abs(aW)/a3);aA.stop(true,true).animate({left:a4},ak,aP)})};var H=function(){var a3=Math.ceil(U/az);var a2="";for(var a1=0;a1<a3;a1++){a2+="<span class='index'></span>"}aj.prepend(a2);O=aj.find(".index").mousedown(Z).bind("click",ai);L.bind(g,av)};var av=function(){var a1=Math.ceil(ah/az);O.filter(".index-hl").removeClass("index-hl");O.eq(a1).addClass("index-hl")};var R=function(){aW=-ah*C;at.stop(true,true).animate({left:aW},ak,aP,function(){L.trigger(j)});J()};var J=function(){L.trigger(x).trigger(r).trigger(g)};var ag=function(a1){ao((a1.pageX-Q.offset().left)/Q.width())};var ao=function(a4){if(a4!=aH){aH=a4;var a1;var a2=a4*af;if(a2>Math.abs(aW)){a1=Math.ceil(a2/C)}else{if(a2<Math.abs(aW)){a1=Math.floor(a2/C)}else{return}}var a3=a1+(aW/C);ah+=a3;aC-=a3;R()}};var ai=function(){T();ah=a(this).index()*az;aC=ap-ah;R();return false};var aq=function(){T();if(aC<ap){var a1=aa?1:Math.min(ap-aC,az);aC+=a1;ah-=a1}else{if(G){aC=0;ah=ap}else{return}}R()};var V=function(){T();if(ah<ap){var a1=aa?1:Math.min(ap-ah,az);ah+=a1;aC-=a1}else{if(G){ah=0;aC=ap}else{return}}R()};var al=function(){T();if(ah<ap){var a1=aa?1:Math.min(ap-ah,az);ah+=a1;aC-=a1}else{ah=0;aC=ap}R()};var A=function(){ab(a(this))};var ab=function(a1){if(a1.outerWidth()>0&&a1.outerHeight()>0){var a2;if(a1.outerWidth()>M){a2=a1.outerHeight()/a1.outerWidth();a1.css({width:M,height:a2*M})}if(a1.outerHeight()>ax){a2=a1.outerWidth()/a1.outerHeight();a1.css({width:a2*ax,height:ax})}a1.css({left:Math.round((M-a1.outerWidth())/2),top:aQ+Math.round((ax-a1.outerHeight())/2)})}};var ac=function(){L.unbind(j).unbind("mouseenter").unbind("mouseleave");T();a(document).unbind("keyup",B)};var ae=function(){if(N){L.bind(j,aG).hover(aK,an).trigger(j)}a(document).bind("keyup",B)};var aR=function(){a(this).find("img:first").stop().animate({opacity:w},n)};var aB=function(){a(this).find("img:first").stop().animate({opacity:1},n,function(){if(jQuery.browser.msie){this.style.removeAttribute("filter")}})};var K=function(){var a1=a(this).find(">p:first");a1.stop().animate({top:aY==h?ax-a1.outerHeight():0},n)};var aO=function(){var a1=a(this).find(">p:first");a1.stop().animate({top:aY==h?ax:-a1.outerHeight()},n)};var aK=function(){L.unbind(j);T()};var an=function(){L.bind(j,aG).trigger(j)};var B=function(a1){switch(a1.keyCode){case 37:aq();break;case 39:V();break}};var Z=function(){return false};var D=function(){for(var a3=0;a3<am.length;a3++){var a1=Math.floor(Math.random()*am.length);var a2=am[a3];am[a3]=am[a1];am[a1]=a2}for(var a3=0;a3<am.length;a3++){am[a3]=am[a3].clone(true)}for(var a3=0;a3<am.length;a3++){aN.eq(a3).replaceWith(am[a3])}};var aG=function(){if(aS==null){aS=setTimeout(al,y)}};var T=function(){clearTimeout(aS);aS=null}}var c=function(y,z){if(!isNaN(y)&&y>0){return y}return z};var u=function(y,z){if(!isNaN(y)&&y>=0){return y}return z};var i={num_display:3,slide_width:300,slide_height:200,slide_margin:1,button_width:35,ctrl_height:20,margin:10,auto_scroll:true,delay:k,scroll_speed:o,easing:"",auto_scale:true,move_one:false,ctrl_type:"scrollbar",display_buttons:true,mouseover_buttons:false,display_caption:true,mouseover_caption:false,caption_align:h,caption_position:f,cont_nav:true,shuffle:false};var m=a.extend(true,{},i,s);return this.each(function(){var y=new q(a(this),m);y.init()})}})(jQuery);